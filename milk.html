<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìš°ìœ  ë‹¹ë²ˆ ì„ íƒê¸°</title>
  <style>
    @import url('https://cdn.rawgit.com/moonspam/NanumSquare/master/nanumsquare.css');
    * {
      font-family: "nanumsquare";
    }

    body {
      font-family: 'Arial', sans-serif;
      text-align: center;
      padding: 40px;
      background-color: #f3faff;
    }
    h1 {
      font-size: 2em;
    }
    select {
      font-size: 1.2em;
      margin: 10px;
    }
    #result {
      margin-top: 20px;
      font-size: 1.5em;
      color: #0077cc;

      display: flex;
      flex-wrap: nowrap;
      justify-content: center;
      align-items: center;
      flex-direction: row;
    }
    textarea {
      width: 300px;
      height: 80px;
      margin-top: 20px;
    }
    button {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 1em;
      cursor: pointer;
    }

    button {
      width: 10em;
      height: 4em;


      background-color: #0077cc;
      color: #f3faff;

      border: none;
      border-radius: 2em;
    }
  </style>
</head>
<body>

  <h1>ìš°ìœ  ë‹¹ë²ˆ ì„ íƒ</h1>

  <label>1ë²ˆ ë‹¹ë²ˆ: </label>
  <select id="duty1">
    <option disabled selected>ì„ íƒ</option>
  </select><br>

  <label>2ë²ˆ ë‹¹ë²ˆ: </label>
  <select id="duty2">
    <option disabled selected>ì„ íƒ</option>
  </select><br>

  <button onclick="saveDuty()">ë‹¹ë²ˆ ì €ì¥</button>

  <div id="result">ë‹¹ë²ˆì„ ì„ íƒí•˜ê³  ì €ì¥í•˜ì„¸ìš”.</div>

  <h2>ëª…ë‹¨ ì…ë ¥</h2>
  <p>ì‰¼í‘œë¡œ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ê¹€ì˜í¬, ë°•ì² ìˆ˜, í™ê¸¸ë™)<br>(ê¸°ë³¸ê°’ì€ 24ëª… ì „ì²´ ì…ë‹ˆë‹¤.)</p>
  <textarea id="nameInput" placeholder="ì˜ˆ: ê¹€ì˜í¬, ë°•ì² ìˆ˜, í™ê¸¸ë™"></textarea><br>
  <button onclick="saveNames()">ëª…ë‹¨ ì €ì¥</button>

  <script>
    const STORAGE_NAMES = "milk_duty_names_v4";
    const STORAGE_DUTY1 = "milk_duty_1";
    const STORAGE_DUTY2 = "milk_duty_2";
    const STORAGE_DATE = "milk_duty_date";

    function getTodayDateStr() {
      const today = new Date();
      return today.toISOString().split("T")[0]; // YYYY-MM-DD
    }

    function loadNames() {
      const saved = localStorage.getItem(STORAGE_NAMES);
      return saved ? saved.split(",").map(n => n.trim()).filter(Boolean) : [
        "ê¹€ë¯¼ì°¬",
        "ê¹€ì†Œì˜",
        "ê¹€ì˜ˆë‚˜",
        "ê¹€ì˜ˆì¸",
        "ê¹€ìœ ì§„",
        "ê¹€í•˜ì§„",
        "ë¬¸ìŠ¹ë¯¼",
        "ë¯¼ì±„ì•„",
        "ë³€ê°€ì—°",
        "ë³€ìŠ¹ê·œ",
        "ì„œì§€ì•„",
        "ì–‘í˜œì£¼",
        "ìš°ìŠ¹ê¸°",
        "ì´ë„ìœ¤",
        "ì´ìš©ìš°",
        "ì´ì¬ì•„",
        "ì´í•œë³„",
        "ì´í˜„",
        "ì´í˜„ë ¹",
        "ì¥ì˜ì°¬",
        "ì¥ì¤€í˜",
        "ìµœì¬ì¸",
        "ìµœí•´ìœ¨",
        "í™ì§€ìš°"
      ];
    }

    function populateSelectBoxes() {
      const names = loadNames();
      const select1 = document.getElementById("duty1");
      const select2 = document.getElementById("duty2");

      select1.innerHTML = '<option disabled>ì„ íƒ</option>';
      select2.innerHTML = '<option disabled>ì„ íƒ</option>';

      names.forEach(name => {
        const option1 = document.createElement("option");
        option1.value = name;
        option1.textContent = name;
        const option2 = option1.cloneNode(true);
        select1.appendChild(option1);
        select2.appendChild(option2);
      });

      const saved1 = localStorage.getItem(STORAGE_DUTY1);
      const saved2 = localStorage.getItem(STORAGE_DUTY2);
      if (saved1) select1.value = saved1;
      if (saved2) select2.value = saved2;

      displayDuty();
    }

    function saveDuty() {
      const d1 = document.getElementById("duty1").value;
      const d2 = document.getElementById("duty2").value;

      if (!d1 || !d2 || d1 === d2) {
        document.getElementById("result").textContent = "âš ï¸ ì„œë¡œ ë‹¤ë¥¸ ë‘ ëª…ì„ ì„ íƒí•˜ì„¸ìš”!";
        return;
      }

      localStorage.setItem(STORAGE_DUTY1, d1);
      localStorage.setItem(STORAGE_DUTY2, d2);
      localStorage.setItem(STORAGE_DATE, getTodayDateStr());

      displayDuty();
    }

    function displayDuty() {
      const d1 = localStorage.getItem(STORAGE_DUTY1);
      const d2 = localStorage.getItem(STORAGE_DUTY2);
      const savedDate = localStorage.getItem(STORAGE_DATE);
      const today = getTodayDateStr();

      if (!d1 || !d2) {
        document.getElementById("result").textContent = "ë‹¹ë²ˆì„ ì„ íƒí•˜ê³  ì €ì¥í•˜ì„¸ìš”.";
        return;
      }

      if (savedDate === today) {
        document.getElementById("result").innerHTML = `<div style="width: 1em; height: 1em; border-radius: 0.5em; background-color: #DDDDE0; margin-right: 2em;"></div> ë‚´ì¼ ğŸ¥› ë‹¹ë²ˆì€ "${d1}", "${d2}" ì…ë‹ˆë‹¤!`;
      } else {
        document.getElementById("result").innerHTML = `<div style="width: 1em; height: 1em; border-radius: 0.5em; background-color: yellowgreen; margin-right: 2em;"></div> ì˜¤ëŠ˜ ğŸ¥› ë‹¹ë²ˆì€ "${d1}", "${d2}" ì…ë‹ˆë‹¤!`;
      }
    }

    function saveNames() {
      const input = document.getElementById("nameInput").value;
      if (!input.trim()) {
        alert("ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”!");
        return;
      }
      localStorage.setItem(STORAGE_NAMES, input);
      populateSelectBoxes();
      document.getElementById("result").textContent = "ëª…ë‹¨ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¹ë²ˆì„ ë‹¤ì‹œ ì„ íƒí•˜ì„¸ìš”.";
    }

    // ì´ˆê¸°í™”
    populateSelectBoxes();
  </script>

</body>
</html>
